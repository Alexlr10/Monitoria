-- MySQL Script generated by MySQL Workbench
-- Wed Nov  6 16:42:35 2019
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-------------------------------
-- Schema gestao_monitorias
-- -----------------------------------------------------
-- CREATE SCHEMA IF NOT EXISTS `gestao_monitorias` DEFAULT CHARACTER SET latin1 ;
-- USE `gestao_monitorias` ;

-- -----------------------------------------------------
-- Table `gestao_monitorias`.`disciplina`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `gestao_monitorias`.`disciplina` (
  `id_disciplina` INT NOT NULL AUTO_INCREMENT,
  `nome` VARCHAR(80) NOT NULL,
  `curso` VARCHAR(80) NOT NULL,
  `campus` VARCHAR(45) NOT NULL,
  `codigo` VARCHAR(45) NOT NULL,
  `unidade_academica` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`id_disciplina`, `codigo`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `gestao_monitorias`.`periodo`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `gestao_monitorias`.`periodo` (
  `id_periodo` INT NOT NULL AUTO_INCREMENT,
  `semestre` INT NOT NULL,
  `ano` INT NOT NULL,
  `ativo` INT NOT NULL DEFAULT 0,
  PRIMARY KEY (`id_periodo`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `gestao_monitorias`.`usuario`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `gestao_monitorias`.`usuario` (
  `id_usuario` INT NOT NULL AUTO_INCREMENT,
  `matricula` VARCHAR(45) NOT NULL,
  `nome` VARCHAR(100) NOT NULL,
  `email` VARCHAR(45) NULL,
  `senha` TEXT NOT NULL,
  `telefone` VARCHAR(45) NULL,
  `perfil` VARCHAR(20) NOT NULL DEFAULT 'Não definido',
  PRIMARY KEY (`id_usuario`),
  UNIQUE INDEX `email_UNIQUE` (`email` ASC) ,
  UNIQUE INDEX `matricula_UNIQUE` (`matricula` ASC) )
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `gestao_monitorias`.`monitoria`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `gestao_monitorias`.`monitoria` (
  `id_monitoria` INT NOT NULL AUTO_INCREMENT,
  `id_disciplina` INT NOT NULL,
  `id_periodo` INT NOT NULL,
  `id_professor` INT NULL,
  `id_monitor` INT NULL,
  `carga_horaria` TIME NOT NULL COMMENT 'Carga horaria total semanal da monitoria',
  `carga_horaria_aulas` TIME NOT NULL COMMENT 'Carga horaria semanal da monitoria que deve ser utilizada para dar aulas',
  `monitoria_remunerada` VARCHAR(5) NOT NULL,
  `plano_aula` VARCHAR(5000) NULL,
  `numero_edital` VARCHAR(45) NULL COMMENT 'Numero do edital de ingresso do monitor',
  `data_inicio` DATE NOT NULL COMMENT 'Data de inicio das atividades do monitor',
  `data_fim` DATE NULL COMMENT 'Data de termino das atividades do monitor',
  PRIMARY KEY (`id_monitoria`),
  INDEX `fk_monitoria_disciplina_idx` (`id_disciplina` ASC) ,
  INDEX `fk_monitoria_periodo1_idx` (`id_periodo` ASC) ,
  INDEX `fk_monitoria_usuario1_idx` (`id_professor` ASC) ,
  INDEX `fk_monitoria_usuario2_idx` (`id_monitor` ASC) ,
  CONSTRAINT `fk_monitoria_disciplina`
    FOREIGN KEY (`id_disciplina`)
    REFERENCES `gestao_monitorias`.`disciplina` (`id_disciplina`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_monitoria_periodo1`
    FOREIGN KEY (`id_periodo`)
    REFERENCES `gestao_monitorias`.`periodo` (`id_periodo`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_monitoria_usuario1`
    FOREIGN KEY (`id_professor`)
    REFERENCES `gestao_monitorias`.`usuario` (`id_usuario`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_monitoria_usuario2`
    FOREIGN KEY (`id_monitor`)
    REFERENCES `gestao_monitorias`.`usuario` (`id_usuario`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `gestao_monitorias`.`local`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `gestao_monitorias`.`local` (
  `id_local` INT NOT NULL AUTO_INCREMENT,
  `predio` VARCHAR(100) NOT NULL,
  `sala` VARCHAR(100) NOT NULL,
  `campus` VARCHAR(100) NOT NULL,
  PRIMARY KEY (`id_local`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `gestao_monitorias`.`horario_monitoria`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `gestao_monitorias`.`horario_monitoria` (
  `id_horario_monitoria` INT NOT NULL AUTO_INCREMENT,
  `id_monitoria` INT NOT NULL,
  `dia_semana` VARCHAR(45) NOT NULL,
  `horario_inicio` TIME NOT NULL,
  `horario_fim` TIME NOT NULL,
  `id_local` INT NOT NULL,
  `cadastrado` TIMESTAMP NOT NULL,
  PRIMARY KEY (`id_horario_monitoria`),
  INDEX `fk_horario_monitoria_monitoria1_idx` (`id_monitoria` ASC) ,
  INDEX `fk_horario_monitoria_local1_idx` (`id_local` ASC) ,
  CONSTRAINT `fk_horario_monitoria_monitoria1`
    FOREIGN KEY (`id_monitoria`)
    REFERENCES `gestao_monitorias`.`monitoria` (`id_monitoria`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_horario_monitoria_local1`
    FOREIGN KEY (`id_local`)
    REFERENCES `gestao_monitorias`.`local` (`id_local`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `gestao_monitorias`.`aula`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `gestao_monitorias`.`aula` (
  `id_aula` INT NOT NULL AUTO_INCREMENT,
  `data` DATE NOT NULL,
  `horario_inicio` TIME NOT NULL,
  `horario_fim` TIME NOT NULL,
  `atividades` VARCHAR(2000) NOT NULL,
  `id_monitoria` INT NOT NULL,
  `id_local` INT NOT NULL,
  `cadastrado` TIMESTAMP NOT NULL,
  `atualizado` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id_aula`),
  INDEX `fk_aula_monitoria1_idx` (`id_monitoria` ASC) ,
  INDEX `fk_aula_local1_idx` (`id_local` ASC) ,
  CONSTRAINT `fk_aula_monitoria1`
    FOREIGN KEY (`id_monitoria`)
    REFERENCES `gestao_monitorias`.`monitoria` (`id_monitoria`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_aula_local1`
    FOREIGN KEY (`id_local`)
    REFERENCES `gestao_monitorias`.`local` (`id_local`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `gestao_monitorias`.`frequencia`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `gestao_monitorias`.`frequencia` (
  `id_frequencia` INT NOT NULL AUTO_INCREMENT,
  `id_aluno` INT NOT NULL,
  `id_aula` INT NOT NULL,
  `cadastrado` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id_frequencia`),
  INDEX `fk_frequencia_usuario1_idx` (`id_aluno` ASC) ,
  INDEX `fk_frequencia_aula1_idx` (`id_aula` ASC) ,
  CONSTRAINT `fk_frequencia_usuario1`
    FOREIGN KEY (`id_aluno`)
    REFERENCES `gestao_monitorias`.`usuario` (`id_usuario`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_frequencia_aula1`
    FOREIGN KEY (`id_aula`)
    REFERENCES `gestao_monitorias`.`aula` (`id_aula`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `gestao_monitorias`.`aluno_monitoria`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `gestao_monitorias`.`aluno_monitoria` (
  `idaluno_monitoria` INT NOT NULL AUTO_INCREMENT,
  `id_aluno` INT NOT NULL,
  `id_monitoria` INT NOT NULL,
  PRIMARY KEY (`idaluno_monitoria`),
  INDEX `fk_aluno_monitoria_usuario1_idx` (`id_aluno` ASC) ,
  INDEX `fk_aluno_monitoria_monitoria1_idx` (`id_monitoria` ASC) ,
  CONSTRAINT `fk_aluno_monitoria_usuario1`
    FOREIGN KEY (`id_aluno`)
    REFERENCES `gestao_monitorias`.`usuario` (`id_usuario`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_aluno_monitoria_monitoria1`
    FOREIGN KEY (`id_monitoria`)
    REFERENCES `gestao_monitorias`.`monitoria` (`id_monitoria`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `gestao_monitorias`.`atividade`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `gestao_monitorias`.`atividade` (
  `id_atividade` INT NOT NULL AUTO_INCREMENT,
  `data` DATE NOT NULL,
  `horario_inicio` TIME NOT NULL,
  `horario_fim` TIME NOT NULL,
  `descricao` VARCHAR(2000) NOT NULL COMMENT 'Descrição da atividade',
  `cadastrado` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `atualizado` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `id_monitoria` INT NOT NULL,
  PRIMARY KEY (`id_atividade`),
  INDEX `fk_atividade_monitoria1_idx` (`id_monitoria` ASC) ,
  CONSTRAINT `fk_atividade_monitoria1`
    FOREIGN KEY (`id_monitoria`)
    REFERENCES `gestao_monitorias`.`monitoria` (`id_monitoria`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `gestao_monitorias`.`disciplina`
-- -----------------------------------------------------
START TRANSACTION;
USE `gestao_monitorias`;
INSERT INTO `gestao_monitorias`.`disciplina` (`id_disciplina`, `nome`, `curso`, `campus`, `codigo`, `unidade_academica`) VALUES (1, 'Algoritmos e Estrutura de Dados III', 'Sistemas de Informação', 'Campus JK', 'COM009', 'Decom');
INSERT INTO `gestao_monitorias`.`disciplina` (`id_disciplina`, `nome`, `curso`, `campus`, `codigo`, `unidade_academica`) VALUES (2, 'Programação Orientada a Objetos', 'Sistemas de Informação', 'Campus JK', 'COM016', 'Decom');

COMMIT;


-- -----------------------------------------------------
-- Data for table `gestao_monitorias`.`periodo`
-- -----------------------------------------------------
START TRANSACTION;
USE `gestao_monitorias`;
INSERT INTO `gestao_monitorias`.`periodo` (`id_periodo`, `semestre`, `ano`, `ativo`) VALUES (1, 1, 2018, 0);
INSERT INTO `gestao_monitorias`.`periodo` (`id_periodo`, `semestre`, `ano`, `ativo`) VALUES (2, 2, 2018, 1);

COMMIT;


-- -----------------------------------------------------
-- Data for table `gestao_monitorias`.`usuario`
-- -----------------------------------------------------
START TRANSACTION;
USE `gestao_monitorias`;
INSERT INTO `gestao_monitorias`.`usuario` (`id_usuario`, `matricula`, `nome`, `email`, `senha`, `telefone`, `perfil`) VALUES (1, 'admin', 'Usuário Admin	', 'admin', '202cb962ac59075b964b07152d234b70', '(00) 0000-0000', 'Administrador');
INSERT INTO `gestao_monitorias`.`usuario` (`id_usuario`, `matricula`, `nome`, `email`, `senha`, `telefone`, `perfil`) VALUES (2, '001', 'João Teste', 'professor@gmail.com', '202cb962ac59075b964b07152d234b70', '(00) 1111-1111', 'Professor');
INSERT INTO `gestao_monitorias`.`usuario` (`id_usuario`, `matricula`, `nome`, `email`, `senha`, `telefone`, `perfil`) VALUES (3, '002', 'Maria Teste', 'monitora@gmail.com', '202cb962ac59075b964b07152d234b70', '(00) 2222-2222', 'Monitor');
INSERT INTO `gestao_monitorias`.`usuario` (`id_usuario`, `matricula`, `nome`, `email`, `senha`, `telefone`, `perfil`) VALUES (4, '003', 'Vivian', 'professora@gmail.com', '202cb962ac59075b964b07152d234b70', '(00) 3333-3333', 'Professor');
INSERT INTO `gestao_monitorias`.`usuario` (`id_usuario`, `matricula`, `nome`, `email`, `senha`, `telefone`, `perfil`) VALUES (5, '004', 'Pedro', 'monitor@gmail.com', '202cb962ac59075b964b07152d234b70', '(00) 4444-4444', 'Monitor');
INSERT INTO `gestao_monitorias`.`usuario` (`id_usuario`, `matricula`, `nome`, `email`, `senha`, `telefone`, `perfil`) VALUES (6, '005', 'Felipe', 'aluno@gmail.com', '202cb962ac59075b964b07152d234b70', '(00) 5555-5555', 'Aluno');
INSERT INTO `gestao_monitorias`.`usuario` (`id_usuario`, `matricula`, `nome`, `email`, `senha`, `telefone`, `perfil`) VALUES (7, '006', 'Jose', 'aluno2@gmail.com', '202cb962ac59075b964b07152d234b70', 'NULL', 'Aluno');

COMMIT;


-- -----------------------------------------------------
-- Data for table `gestao_monitorias`.`monitoria`
-- -----------------------------------------------------
START TRANSACTION;
USE `gestao_monitorias`;
INSERT INTO `gestao_monitorias`.`monitoria` (`id_monitoria`, `id_disciplina`, `id_periodo`, `id_professor`, `id_monitor`, `carga_horaria`, `carga_horaria_aulas`, `monitoria_remunerada`, `plano_aula`, `numero_edital`, `data_inicio`, `data_fim`) VALUES (1, 1, 1, 2, 3, '20:00', '20:00', 'Sim', NULL, 'Edital N. 2, 2019-1', '2019-10-12', '2020-12-12');
INSERT INTO `gestao_monitorias`.`monitoria` (`id_monitoria`, `id_disciplina`, `id_periodo`, `id_professor`, `id_monitor`, `carga_horaria`, `carga_horaria_aulas`, `monitoria_remunerada`, `plano_aula`, `numero_edital`, `data_inicio`, `data_fim`) VALUES (2, 2, 2, 4, 5, '20:00', '20:00', 'Não', NULL, 'Edital N. 3,  2019-1', '2019-10-12', '2020-12-12');

COMMIT;


-- -----------------------------------------------------
-- Data for table `gestao_monitorias`.`local`
-- -----------------------------------------------------
START TRANSACTION;
USE `gestao_monitorias`;
INSERT INTO `gestao_monitorias`.`local` (`id_local`, `predio`, `sala`, `campus`) VALUES (1, 'Pavilhão de aluas I', 'sala 203', 'Campus JK');
INSERT INTO `gestao_monitorias`.`local` (`id_local`, `predio`, `sala`, `campus`) VALUES (2, 'Pavilhão de aluas I', 'Sala 204', 'Campus JK');

COMMIT;


-- -----------------------------------------------------
-- Data for table `gestao_monitorias`.`horario_monitoria`
-- -----------------------------------------------------
START TRANSACTION;
USE `gestao_monitorias`;
INSERT INTO `gestao_monitorias`.`horario_monitoria` (`id_horario_monitoria`, `id_monitoria`, `dia_semana`, `horario_inicio`, `horario_fim`, `id_local`, `cadastrado`) VALUES (1, 2, 'Segunda-feira', '13:00', '15:00', 1, '2018-08-24 18:42:23');
INSERT INTO `gestao_monitorias`.`horario_monitoria` (`id_horario_monitoria`, `id_monitoria`, `dia_semana`, `horario_inicio`, `horario_fim`, `id_local`, `cadastrado`) VALUES (2, 2, 'Terça-feira', '14:00', '16:00', 1, '2018-08-24 18:44:23');

COMMIT;


-- -----------------------------------------------------
-- Data for table `gestao_monitorias`.`aula`
-- -----------------------------------------------------
START TRANSACTION;
USE `gestao_monitorias`;
INSERT INTO `gestao_monitorias`.`aula` (`id_aula`, `data`, `horario_inicio`, `horario_fim`, `atividades`, `id_monitoria`, `id_local`, `cadastrado`, `atualizado`) VALUES (1, '2018-08-13', '13:00', '15:00', 'revisão de conteúdo', 2, 1, '2018-08-01 18:42:23', '2018-08-01 18:42:23');
INSERT INTO `gestao_monitorias`.`aula` (`id_aula`, `data`, `horario_inicio`, `horario_fim`, `atividades`, `id_monitoria`, `id_local`, `cadastrado`, `atualizado`) VALUES (2, '2018-08-14', '14:00', '16:00', 'lista de exercícios', 2, 1, '2018-08-01 18:50:23', '2018-08-03 18:50:23');

COMMIT;


-- -----------------------------------------------------
-- Data for table `gestao_monitorias`.`frequencia`
-- -----------------------------------------------------
START TRANSACTION;
USE `gestao_monitorias`;
INSERT INTO `gestao_monitorias`.`frequencia` (`id_frequencia`, `id_aluno`, `id_aula`, `cadastrado`) VALUES (1, 6, 1, '2018-08-24 18:42:23');
INSERT INTO `gestao_monitorias`.`frequencia` (`id_frequencia`, `id_aluno`, `id_aula`, `cadastrado`) VALUES (2, 7, 1, '2018-08-24 18:43:23');
INSERT INTO `gestao_monitorias`.`frequencia` (`id_frequencia`, `id_aluno`, `id_aula`, `cadastrado`) VALUES (3, 7, 2, '2018-08-24 18:45:23');

COMMIT;


-- -----------------------------------------------------
-- Data for table `gestao_monitorias`.`aluno_monitoria`
-- -----------------------------------------------------
START TRANSACTION;
USE `gestao_monitorias`;
INSERT INTO `gestao_monitorias`.`aluno_monitoria` (`idaluno_monitoria`, `id_aluno`, `id_monitoria`) VALUES (1, 7, 2);
INSERT INTO `gestao_monitorias`.`aluno_monitoria` (`idaluno_monitoria`, `id_aluno`, `id_monitoria`) VALUES (2, 6, 2);

COMMIT;


-- -----------------------------------------------------
-- Data for table `gestao_monitorias`.`atividade`
-- -----------------------------------------------------
START TRANSACTION;
USE `gestao_monitorias`;
INSERT INTO `gestao_monitorias`.`atividade` (`id_atividade`, `data`, `horario_inicio`, `horario_fim`, `descricao`, `cadastrado`, `atualizado`, `id_monitoria`) VALUES (1, '2018-10-15', '18:00:00', '19:00:00', 'Reunião de alinhamento com o professor', '2018-10-16 20:42:23', '2018-10-16 20:42:23', 2);

COMMIT;

